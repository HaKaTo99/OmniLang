module LambdaTest {
    const test: i32 = {
        let double = |x| x * 2;
        assert_eq(double(10), 20);

        let add = |a, b| a + b;
        assert_eq(add(3, 4), 7);
        
        // Test closure capture
        let factor = 10;
        let multiply = |n| n * factor;
        // Note: Generic HashMap/BTreeMap based environment simple clone might shallow copy or deep copy values?
        // Value::Number is Copy.
        // It should capture `factor`'s value at definition time.
        assert_eq(multiply(5), 50);

        print("Lambda Tests Passed");
        0
    };
}
